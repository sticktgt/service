files:
  - path: Chart.yaml
    template: true
    content: |
      apiVersion: v2
      name: {{ .Chart.Name }}
      version: {{ .Chart.Version }}
      description: {{ .Chart.Description }}
      type: application

  - path: values.yaml
    template: true
    content: |
      ApiVersion: {{ .ApiVersion }}
      {{- if .Environment }}
      Environment: {{ .Environment }}
      {{- end }}
      {{- if .Protocol }}
      Protocol: {{ .Protocol }}
      {{- end }}
      {{- if .Transport }}
      Transport: {{ .Transport }}
      {{- end }}
      {{- if .Annotations }}
      SpecAnnotations:
        {{- range $k, $v := .Annotations }}
        {{ $k }}: {{ $v }}
        {{- end }}
      {{- end }}
      Chart:
        Name: {{ .Chart.Name }}
        Version: {{ .Chart.Version }}
        Description: {{ .Chart.Description }}
      DeploymentName: {{ .DeploymentName }}
      Namespace: {{ .Namespace }}
      Metadata:
        Labels:
          {{- range $k, $v := .Metadata.Labels }}
          {{ $k }}: {{ $v }}
          {{- end }}
        Annotations:
          {{- range $k, $v := .Metadata.Annotations }}
          {{ $k }}: {{ $v }}
          {{- end }}
      Predictors:
      {{- range .Predictors }}
        - Name: {{ .Name }}
          Graph:
            Name: {{ .Graph.Name }}
            Type: {{ .Graph.Type }}
            {{- if .Graph.Implementation }}
            Implementation: {{ .Graph.Implementation }}
            {{- end }}
            {{- if .Graph.ModelUri }}
            ModelUri: {{ .Graph.ModelUri }}
            {{- end }}
            {{- if .Graph.EnvSecretRefName }}
            EnvSecretRefName: {{ .Graph.EnvSecretRefName }}
            {{- end }}
            {{- if .Graph.Endpoint }}
            Endpoint:
              Type: {{ .Graph.Endpoint.Type }}
            {{- end }}
            {{- if .Graph.Logger }}
            Logger:
              Mode: {{ .Graph.Logger.Mode }}
              {{- if .Graph.Logger.URL }}
              URL: {{ .Graph.Logger.URL }}
              {{- end }}
            {{- end }}
            {{- if .Graph.Parameters }}
            Parameters:
              {{- range .Graph.Parameters }}
              - Name: {{ .Name }}
                Type: {{ .Type }}
                Value: {{ .Value }}
              {{- end }}
            {{- end }}
            {{- if .Graph.Children }}
            Children:
              {{- range .Graph.Children }}
              - Name: {{ .Name }}
                Type: {{ .Type }}
                {{- if .Implementation }}
                Implementation: {{ .Implementation }}
                {{- end }}
                {{- if .ModelUri }}
                ModelUri: {{ .ModelUri }}
                {{- end }}
                {{- if .EnvSecretRefName }}
                EnvSecretRefName: {{ .EnvSecretRefName }}
                {{- end }}
                {{- if .Endpoint }}
                Endpoint:
                  Type: {{ .Endpoint.Type }}
                {{- end }}
                {{- if .Logger }}
                Logger:
                  Mode: {{ .Logger.Mode }}
                  {{- if .Logger.URL }}
                  URL: {{ .Logger.URL }}
                  {{- end }}
                {{- end }}
                {{- if .Parameters }}
                Parameters:
                  {{- range .Parameters }}
                  - Name: {{ .Name }}
                    Type: {{ .Type }}
                    Value: {{ .Value }}
                  {{- end }}
                {{- end }}
                {{- if .Children }}
                Children:
                  {{- range .Children }}
                  - Name: {{ .Name }}
                    Type: {{ .Type }}
                    {{- if .Implementation }}
                    Implementation: {{ .Implementation }}
                    {{- end }}
                    {{- if .ModelUri }}
                    ModelUri: {{ .ModelUri }}
                    {{- end }}
                    {{- if .EnvSecretRefName }}
                    EnvSecretRefName: {{ .EnvSecretRefName }}
                    {{- end }}
                    {{- if .Endpoint }}
                    Endpoint:
                      Type: {{ .Endpoint.Type }}
                    {{- end }}
                    {{- if .Logger }}
                    Logger:
                      Mode: {{ .Logger.Mode }}
                      {{- if .Logger.URL }}
                      URL: {{ .Logger.URL }}
                      {{- end }}
                    {{- end }}
                    {{- if .Parameters }}
                    Parameters:
                      {{- range .Parameters }}
                      - Name: {{ .Name }}
                        Type: {{ .Type }}
                        Value: {{ .Value }}
                      {{- end }}
                    {{- end }}
                    {{- if .Children }}
                    Children:
                      {{- range .Children }}
                      - Name: {{ .Name }}
                        Type: {{ .Type }}
                        {{- if .Implementation }}
                        Implementation: {{ .Implementation }}
                        {{- end }}
                        {{- if .ModelUri }}
                        ModelUri: {{ .ModelUri }}
                        {{- end }}
                        {{- if .EnvSecretRefName }}
                        EnvSecretRefName: {{ .EnvSecretRefName }}
                        {{- end }}
                        {{- if .Endpoint }}
                        Endpoint:
                          Type: {{ .Endpoint.Type }}
                        {{- end }}
                        {{- if .Logger }}
                        Logger:
                          Mode: {{ .Logger.Mode }}
                          {{- if .Logger.URL }}
                          URL: {{ .Logger.URL }}
                          {{- end }}
                        {{- end }}
                        {{- if .Parameters }}
                        Parameters:
                          {{- range .Parameters }}
                          - Name: {{ .Name }}
                            Type: {{ .Type }}
                            Value: {{ .Value }}
                          {{- end }}
                        {{- end }}
                        {{- if .Children }}
                        Children:
                          {{- range .Children }}
                          - Name: {{ .Name }}
                            Type: {{ .Type }}
                            {{- if .Implementation }}
                            Implementation: {{ .Implementation }}
                            {{- end }}
                            {{- if .ModelUri }}
                            ModelUri: {{ .ModelUri }}
                            {{- end }}
                            {{- if .EnvSecretRefName }}
                            EnvSecretRefName: {{ .EnvSecretRefName }}
                            {{- end }}
                            {{- if .Endpoint }}
                            Endpoint:
                              Type: {{ .Endpoint.Type }}
                            {{- end }}
                            {{- if .Logger }}
                            Logger:
                              Mode: {{ .Logger.Mode }}
                              {{- if .Logger.URL }}
                              URL: {{ .Logger.URL }}
                              {{- end }}
                            {{- end }}
                            {{- if .Parameters }}
                            Parameters:
                              {{- range .Parameters }}
                              - Name: {{ .Name }}
                                Type: {{ .Type }}
                                Value: {{ .Value }}
                              {{- end }}
                            {{- end }}
                            Children: []
                          {{- end }}
                        {{- else }}
                        Children: []
                        {{- end }}
                      {{- end }}
                    {{- else }}
                    Children: []
                    {{- end }}
                  {{- end }}
                {{- else }}
                Children: []
                {{- end }}
              {{- end }}
            {{- else }}
            Children: []
            {{- end }}
      {{- end }}


  - path: values-ENV.yaml
    template: true
    content: |
      Predictors:
      {{- range .Predictors }}
        - Name: {{ .Name }}
          Replicas: {{ .Replicas }}
          Traffic: {{ .Traffic }}
          {{- if .EngineResources }}
          EngineResources:
            {{- if .EngineResources.Requests }}
            Requests:
              {{- range $k, $v := .EngineResources.Requests }}
              {{ $k }}: {{ $v }}
              {{- end }}
            {{- end }}
            {{- if .EngineResources.Limits }}
            Limits:
              {{- range $k, $v := .EngineResources.Limits }}
              {{ $k }}: {{ $v }}
              {{- end }}
            {{- end }}
          {{- end }}
          {{- if .Labels }}
          Labels:
            {{- range $k, $v := .Labels }}
            {{ $k }}: {{ $v }}
            {{- end }}
          {{- end }}
          {{- if .Shadow }}
          Shadow: {{ .Shadow }}
          {{- end }}
          {{- if .SSL }}
          SSL:
            CertSecretName: {{ .SSL.CertSecretName }}
          {{- end }}
          {{- if .ProgressDeadlineSeconds }}
          ProgressDeadlineSeconds: {{ .ProgressDeadlineSeconds }}
          {{- end }}
          {{- if .Explainer }}
          Explainer:
            {{- if .Explainer.Type }}
            Type: {{ .Explainer.Type }}
            {{- end }}
            {{- if .Explainer.ModelUri }}
            ModelUri: {{ .Explainer.ModelUri }}
            {{- end }}
            {{- if .Explainer.ServiceAccountName }}
            ServiceAccountName: {{ .Explainer.ServiceAccountName }}
            {{- end }}
            {{- if .Explainer.StorageInitializerImage }}
            StorageInitializerImage: {{ .Explainer.StorageInitializerImage }}
            {{- end }}
            {{- if .Explainer.EnvSecretRefName }}
            EnvSecretRefName: {{ .Explainer.EnvSecretRefName }}
            {{- end }}
            {{- if .Explainer.InitParameters }}
            InitParameters: {{ .Explainer.InitParameters }}
            {{- end }}
            {{- if .Explainer.Replicas }}
            Replicas: {{ .Explainer.Replicas }}
            {{- end }}
            {{- if .Explainer.Endpoint }}
            Endpoint:
              Type: {{ .Explainer.Endpoint.Type }}
            {{- end }}
            {{- if .Explainer.Config }}
            Config:
              {{- range $k, $v := .Explainer.Config }}
              {{ $k }}: {{ $v }}
              {{- end }}
            {{- end }}
            {{- if .Explainer.ContainerSpec }}
            ContainerSpec:
              Name: {{ .Explainer.ContainerSpec.Name }}
              Image: {{ .Explainer.ContainerSpec.Image }}
              {{- if .Explainer.ContainerSpec.ImagePullPolicy }}
              ImagePullPolicy: {{ .Explainer.ContainerSpec.ImagePullPolicy }}
              {{- end }}
              {{- if .Explainer.ContainerSpec.Args }}
              Args:
                {{- range .Explainer.ContainerSpec.Args }}
                - {{ . }}
                {{- end }}
              {{- end }}
            {{- end }}
          {{- end }}
          {{- if .SvcOrchSpec }}
          SvcOrchSpec:
            {{- if .SvcOrchSpec.Resources }}
            Resources:
              {{- if .SvcOrchSpec.Resources.Requests }}
              Requests:
                {{- range $k, $v := .SvcOrchSpec.Resources.Requests }}
                {{ $k }}: {{ $v }}
                {{- end }}
              {{- end }}
              {{- if .SvcOrchSpec.Resources.Limits }}
              Limits:
                {{- range $k, $v := .SvcOrchSpec.Resources.Limits }}
                {{ $k }}: {{ $v }}
                {{- end }}
              {{- end }}
            {{- end }}
            {{- if .SvcOrchSpec.Env }}
            Env:
              {{- range .SvcOrchSpec.Env }}
              - Name: {{ .Name }}
                {{- if .Value }}
                Value: {{ .Value }}
                {{- else if .ValueFrom }}
                ValueFrom:
                  SecretKeyRef:
                    Name: {{ .ValueFrom.SecretKeyRef.Name }}
                    Key: {{ .ValueFrom.SecretKeyRef.Key }}
                {{- end }}
              {{- end }}
            {{- end }}
          {{- end }}
          ComponentSpec:
            ServiceAccountName: {{ .ComponentSpec.ServiceAccountName }}
            TerminationGracePeriodSeconds: {{ .ComponentSpec.TerminationGracePeriodSeconds }}
            {{- if .ComponentSpec.HPASpec }}
            HpaSpec:
              MinReplicas: {{ .ComponentSpec.HPASpec.MinReplicas }}
              MaxReplicas: {{ .ComponentSpec.HPASpec.MaxReplicas }}
              Metricsv2:
                {{- range .ComponentSpec.HPASpec.MetricsV2 }}
                - Type: {{ .Type }}
                  Resource:
                    Name: {{ .Resource.Name }}
                    Target:
                      Type: {{ .Resource.Target.Type }}
                      AverageUtilization: {{ .Resource.Target.AverageUtilization }}
                {{- end }}
            {{- end }}
            {{- if .ComponentSpec.Volumes }}
            Volumes:
            {{- range .ComponentSpec.Volumes }}
              - Name: {{ .Name }}
                {{- if .EmptyDir }}
                EmptyDir: {}
                {{- else if .Secret }}
                Secret:
                  SecretName: {{ .Secret.SecretName }}
                {{- end }}
            {{- end }}
            {{- end }}
            {{- if .ComponentSpec.Containers }}
            Containers:
            {{- range .ComponentSpec.Containers }}
              - Name: {{ .Name }}
                Image: {{ .Image }}
                {{- if .ImagePullPolicy }}
                ImagePullPolicy: {{ .ImagePullPolicy }}
                {{- end }}
                {{- if .Args }}
                Args:
                  {{- range .Args }}
                  - {{ . }}
                  {{- end }}
                {{- end }}
                Env:
                  {{- range .Env }}
                  - Name: {{ .Name }}
                    {{- if .Value }}
                    Value: {{ .Value }}
                    {{- else if .ValueFrom }}
                    ValueFrom:
                      SecretKeyRef:
                        Name: {{ .ValueFrom.SecretKeyRef.Name }}
                        Key: {{ .ValueFrom.SecretKeyRef.Key }}
                    {{- end }}
                  {{- end }}
                {{- if .EnvFrom }}
                EnvFrom:
                  {{- range .EnvFrom }}
                  {{- if .SecretRef }}
                  - SecretRef:
                      Name: {{ .SecretRef.Name }}
                  {{- end }}
                  {{- if .ConfigMapRef }}
                  - ConfigMapRef:
                      Name: {{ .ConfigMapRef.Name }}
                  {{- end }}
                  {{- end }}
                {{- end }}
                {{- if .VolumeMounts }}
                VolumeMounts:
                  {{- range .VolumeMounts }}
                  - Name: {{ .Name }}
                    MountPath: {{ .MountPath }}
                    {{- if .ReadOnly }}
                    ReadOnly: {{ .ReadOnly }}
                    {{- end }}
                  {{- end }}
                {{- end }}
                {{- if .Resources }}
                Resources:
                  Requests:
                    {{- range $k, $v := .Resources.Requests }}
                    {{ $k }}: {{ $v }}
                    {{- end }}
                  Limits:
                    {{- range $k, $v := .Resources.Limits }}
                    {{ $k }}: {{ $v }}
                    {{- end }}
                {{- end }}
                {{- if .Liveness }}
                Liveness:
                  Path: {{ .Liveness.Path }}
                  Port: {{ .Liveness.Port }}
                  InitialDelaySeconds: {{ .Liveness.InitialDelaySeconds }}
                  PeriodSeconds: {{ .Liveness.PeriodSeconds }}
                  FailureThreshold: {{ .Liveness.FailureThreshold }}
                  SuccessThreshold: {{ .Liveness.SuccessThreshold }}
                  {{- if .Liveness.Scheme }}
                  Scheme: {{ .Liveness.Scheme }}
                  {{- end }}
                {{- end }}
                {{- if .Readiness }}
                Readiness:
                  Path: {{ .Readiness.Path }}
                  Port: {{ .Readiness.Port }}
                  InitialDelaySeconds: {{ .Readiness.InitialDelaySeconds }}
                  PeriodSeconds: {{ .Readiness.PeriodSeconds }}
                  FailureThreshold: {{ .Readiness.FailureThreshold }}
                  SuccessThreshold: {{ .Readiness.SuccessThreshold }}
                  {{- if .Readiness.Scheme }}
                  Scheme: {{ .Readiness.Scheme }}
                  {{- end }}
                {{- end }}
                {{- if .Lifecycle }}
                Lifecycle:
                  {{- if .Lifecycle.PostStart }}
                  PostStart:
                    {{- if .Lifecycle.PostStart.Exec }}
                    Exec:
                      Command:
                        {{- range .Lifecycle.PostStart.Exec.Command }}
                        - {{ . }}
                        {{- end }}
                    {{- end }}
                    {{- if .Lifecycle.PostStart.HTTPGet }}
                    HttpGet:
                      Path: {{ .Lifecycle.PostStart.HTTPGet.Path }}
                      Port: {{ .Lifecycle.PostStart.HTTPGet.Port }}
                      {{- if .Lifecycle.PostStart.HTTPGet.Scheme }}
                      Scheme: {{ .Lifecycle.PostStart.HTTPGet.Scheme }}
                      {{- end }}
                      {{- if .Lifecycle.PostStart.HTTPGet.Host }}
                      Host: {{ .Lifecycle.PostStart.HTTPGet.Host }}
                      {{- end }}
                    {{- end }}
                  {{- end }}
                  {{- if .Lifecycle.PreStop }}
                  PreStop:
                    {{- if .Lifecycle.PreStop.Exec }}
                    Exec:
                      Command:
                        {{- range .Lifecycle.PreStop.Exec.Command }}
                        - {{ . }}
                        {{- end }}
                    {{- end }}
                    {{- if .Lifecycle.PreStop.HTTPGet }}
                    HttpGet:
                      Path: {{ .Lifecycle.PreStop.HTTPGet.Path }}
                      Port: {{ .Lifecycle.PreStop.HTTPGet.Port }}
                      {{- if .Lifecycle.PreStop.HTTPGet.Scheme }}
                      Scheme: {{ .Lifecycle.PreStop.HTTPGet.Scheme }}
                      {{- end }}
                      {{- if .Lifecycle.PreStop.HTTPGet.Host }}
                      Host: {{ .Lifecycle.PreStop.HTTPGet.Host }}
                      {{- end }}                      
                    {{- end }}
                  {{- end }}
                {{- end }}
            {{- end }}
            {{- end }}
            {{- if .ComponentSpec.InitContainers }}
            InitContainers:    
            {{- range .ComponentSpec.InitContainers }}
              - Name: {{ .Name }}
                Image: {{ .Image }}
                {{- if .ImagePullPolicy }}
                ImagePullPolicy: {{ .ImagePullPolicy }}
                {{- end }}
                {{- if .Args }}
                Args:
                  {{- range .Args }}
                  - {{ . }}
                  {{- end }}
                {{- end }}
                Env:
                  {{- range .Env }}
                  - Name: {{ .Name }}
                    {{- if .Value }}
                    Value: {{ .Value }}
                    {{- else if .ValueFrom }}
                    ValueFrom:
                      SecretKeyRef:
                        Name: {{ .ValueFrom.SecretKeyRef.Name }}
                        Key: {{ .ValueFrom.SecretKeyRef.Key }}
                    {{- end }}
                  {{- end }}
                {{- if .EnvFrom }}
                EnvFrom:
                  {{- range .EnvFrom }}
                  {{- if .SecretRef }}
                  - SecretRef:
                      Name: {{ .SecretRef.Name }}
                  {{- end }}
                  {{- if .ConfigMapRef }}
                  - ConfigMapRef:
                      Name: {{ .ConfigMapRef.Name }}
                  {{- end }}
                  {{- end }}
                {{- end }}
                VolumeMounts:
                  {{- range .VolumeMounts }}
                  - Name: {{ .Name }}
                    MountPath: {{ .MountPath }}
                    {{- if .ReadOnly }}
                    ReadOnly: {{ .ReadOnly }}
                    {{- end }}
                  {{- end }}
                {{- if .Resources }}
                Resources:
                  Requests:
                    {{- range $k, $v := .Resources.Requests }}
                    {{ $k }}: {{ $v }}
                    {{- end }}
                  Limits:
                    {{- range $k, $v := .Resources.Limits }}
                    {{ $k }}: {{ $v }}
                    {{- end }}
                {{- end }}
                {{- if .Liveness }}
                Liveness:
                  Path: {{ .Liveness.Path }}
                  Port: {{ .Liveness.Port }}
                  InitialDelaySeconds: {{ .Liveness.InitialDelaySeconds }}
                  PeriodSeconds: {{ .Liveness.PeriodSeconds }}
                  FailureThreshold: {{ .Liveness.FailureThreshold }}
                  SuccessThreshold: {{ .Liveness.SuccessThreshold }}
                  {{- if .Liveness.Scheme }}
                  Scheme: {{ .Liveness.Scheme }}
                  {{- end }}
                {{- end }}
                {{- if .Readiness }}
                Readiness:
                  Path: {{ .Readiness.Path }}
                  Port: {{ .Readiness.Port }}
                  InitialDelaySeconds: {{ .Readiness.InitialDelaySeconds }}
                  PeriodSeconds: {{ .Readiness.PeriodSeconds }}
                  FailureThreshold: {{ .Readiness.FailureThreshold }}
                  SuccessThreshold: {{ .Readiness.SuccessThreshold }}
                  {{- if .Readiness.Scheme }}
                  Scheme: {{ .Readiness.Scheme }}
                  {{- end }}
                {{- end }}
                {{- if .Lifecycle }}
                Lifecycle:
                  {{- if .Lifecycle.PostStart }}
                  PostStart:
                    {{- if .Lifecycle.PostStart.Exec }}
                    Exec:
                      Command:
                        {{- range .Lifecycle.PostStart.Exec.Command }}
                        - {{ . }}
                        {{- end }}
                    {{- end }}
                    {{- if .Lifecycle.PostStart.HTTPGet }}
                    HttpGet:
                      Path: {{ .Lifecycle.PostStart.HTTPGet.Path }}
                      Port: {{ .Lifecycle.PostStart.HTTPGet.Port }}
                      {{- if .Lifecycle.PostStart.HTTPGet.Scheme }}
                      Scheme: {{ .Lifecycle.PostStart.HTTPGet.Scheme }}
                      {{- end }}
                      {{- if .Lifecycle.PostStart.HTTPGet.Host }}
                      Host: {{ .Lifecycle.PostStart.HTTPGet.Host }}
                      {{- end }}
                    {{- end }}
                  {{- end }}
                  {{- if .Lifecycle.PreStop }}
                  PreStop:
                    {{- if .Lifecycle.PreStop.Exec }}
                    Exec:
                      Command:
                        {{- range .Lifecycle.PreStop.Exec.Command }}
                        - {{ . }}
                        {{- end }}
                    {{- end }}
                    {{- if .Lifecycle.PreStop.HTTPGet }}
                    HttpGet:
                      Path: {{ .Lifecycle.PreStop.HTTPGet.Path }}
                      Port: {{ .Lifecycle.PreStop.HTTPGet.Port }}
                      {{- if .Lifecycle.PreStop.HTTPGet.Scheme }}
                      Scheme: {{ .Lifecycle.PreStop.HTTPGet.Scheme }}
                      {{- end }}
                      {{- if .Lifecycle.PreStop.HTTPGet.Host }}
                      Host: {{ .Lifecycle.PreStop.HTTPGet.Host }}
                      {{- end }}
                    {{- end }}
                  {{- end }}
                {{- end }}
            {{- end }}
            {{- end }}
          Graph:
            Name: {{ .Graph.Name }}
            Type: {{ .Graph.Type }}
            {{- if .Graph.Implementation }}
            Implementation: {{ .Graph.Implementation }}
            {{- end }}
            {{- if .Graph.ModelUri }}
            ModelUri: {{ .Graph.ModelUri }}
            {{- end }}
            {{- if .Graph.EnvSecretRefName }}
            EnvSecretRefName: {{ .Graph.EnvSecretRefName }}
            {{- end }}
            {{- if .Graph.Endpoint }}
            Endpoint:
              Type: {{ .Graph.Endpoint.Type }}
            {{- end }}
            {{- if .Graph.Logger }}
            Logger:
              Mode: {{ .Graph.Logger.Mode }}
              {{- if .Graph.Logger.URL }}
              URL: {{ .Graph.Logger.URL }}
              {{- end }}
            {{- end }}
            {{- if .Graph.Parameters }}
            Parameters:
              {{- range .Graph.Parameters }}
              - Name: {{ .Name }}
                Type: {{ .Type }}
                Value: {{ .Value }}
              {{- end }}
            {{- end }}
            {{- if .Graph.Children }}
            Children:
              {{- range .Graph.Children }}
              - Name: {{ .Name }}
                Type: {{ .Type }}
                {{- if .Implementation }}
                Implementation: {{ .Implementation }}
                {{- end }}
                {{- if .ModelUri }}
                ModelUri: {{ .ModelUri }}
                {{- end }}
                {{- if .EnvSecretRefName }}
                EnvSecretRefName: {{ .EnvSecretRefName }}
                {{- end }}
                {{- if .Endpoint }}
                Endpoint:
                  Type: {{ .Endpoint.Type }}
                {{- end }}
                {{- if .Logger }}
                Logger:
                  Mode: {{ .Logger.Mode }}
                  {{- if .Logger.URL }}
                  URL: {{ .Logger.URL }}
                  {{- end }}
                {{- end }}
                {{- if .Parameters }}
                Parameters:
                  {{- range .Parameters }}
                  - Name: {{ .Name }}
                    Type: {{ .Type }}
                    Value: {{ .Value }}
                  {{- end }}
                {{- end }}
                {{- if .Children }}
                Children:
                  {{- range .Children }}
                  - Name: {{ .Name }}
                    Type: {{ .Type }}
                    {{- if .Implementation }}
                    Implementation: {{ .Implementation }}
                    {{- end }}
                    {{- if .ModelUri }}
                    ModelUri: {{ .ModelUri }}
                    {{- end }}
                    {{- if .EnvSecretRefName }}
                    EnvSecretRefName: {{ .EnvSecretRefName }}
                    {{- end }}
                    {{- if .Endpoint }}
                    Endpoint:
                      Type: {{ .Endpoint.Type }}
                    {{- end }}
                    {{- if .Logger }}
                    Logger:
                      Mode: {{ .Logger.Mode }}
                      {{- if .Logger.URL }}
                      URL: {{ .Logger.URL }}
                      {{- end }}
                    {{- end }}
                    {{- if .Parameters }}
                    Parameters:
                      {{- range .Parameters }}
                      - Name: {{ .Name }}
                        Type: {{ .Type }}
                        Value: {{ .Value }}
                      {{- end }}
                    {{- end }}
                    {{- if .Children }}
                    Children:
                      {{- range .Children }}
                      - Name: {{ .Name }}
                        Type: {{ .Type }}
                        {{- if .Implementation }}
                        Implementation: {{ .Implementation }}
                        {{- end }}
                        {{- if .ModelUri }}
                        ModelUri: {{ .ModelUri }}
                        {{- end }}
                        {{- if .EnvSecretRefName }}
                        EnvSecretRefName: {{ .EnvSecretRefName }}
                        {{- end }}
                        {{- if .Endpoint }}
                        Endpoint:
                          Type: {{ .Endpoint.Type }}
                        {{- end }}
                        {{- if .Logger }}
                        Logger:
                          Mode: {{ .Logger.Mode }}
                          {{- if .Logger.URL }}
                          URL: {{ .Logger.URL }}
                          {{- end }}
                        {{- end }}
                        {{- if .Parameters }}
                        Parameters:
                          {{- range .Parameters }}
                          - Name: {{ .Name }}
                            Type: {{ .Type }}
                            Value: {{ .Value }}
                          {{- end }}
                        {{- end }}
                        {{- if .Children }}
                        Children:
                          {{- range .Children }}
                          - Name: {{ .Name }}
                            Type: {{ .Type }}
                            {{- if .Implementation }}
                            Implementation: {{ .Implementation }}
                            {{- end }}
                            {{- if .ModelUri }}
                            ModelUri: {{ .ModelUri }}
                            {{- end }}
                            {{- if .EnvSecretRefName }}
                            EnvSecretRefName: {{ .EnvSecretRefName }}
                            {{- end }}
                            {{- if .Endpoint }}
                            Endpoint:
                              Type: {{ .Endpoint.Type }}
                            {{- end }}
                            {{- if .Logger }}
                            Logger:
                              Mode: {{ .Logger.Mode }}
                              {{- if .Logger.URL }}
                              URL: {{ .Logger.URL }}
                              {{- end }}
                            {{- end }}
                            {{- if .Parameters }}
                            Parameters:
                              {{- range .Parameters }}
                              - Name: {{ .Name }}
                                Type: {{ .Type }}
                                Value: {{ .Value }}
                              {{- end }}
                            {{- end }}
                            Children: []
                          {{- end }}
                        {{- else }}
                        Children: []
                        {{- end }}
                      {{- end }}
                    {{- else }}
                    Children: []
                    {{- end }}
                  {{- end }}
                {{- else }}
                Children: []
                {{- end }}
              {{- end }}
            {{- else }}
            Children: []
            {{- end }}
      {{- end }}

  - path: templates/_helpers.tpl
    template: false
    content: |
      {{- define "seldon.graph.node" }}
      name: {{ .Name }}
      {{- if .Type }}
      type: {{ .Type }}
      {{- end }}
      {{- if .Implementation }}
      implementation: {{ .Implementation }}
      {{- end }}
      {{- if .ModelUri }}
      modelUri: {{ .ModelUri }}
      {{- end }}
      {{- if .EnvSecretRefName }}
      envSecretRefName: {{ .EnvSecretRefName }}
      {{- end }}
      {{- if .Endpoint }}
      endpoint:
        type: {{ .Endpoint.Type }}
      {{- end }}
      {{- if .Logger }}
      logger:
        mode: {{ .Logger.Mode }}
        {{- if .Logger.URL }}
        url: {{ .Logger.URL }}
        {{- end }}
      {{- end }}
      {{- if .Parameters }}
      parameters:
        {{- range .Parameters }}
        - name: {{ .Name }}
          type: {{ .Type }}
          value: {{ .Value }}
        {{- end }}
      {{- end }}
      {{- if .Children }}
      children:
        {{- range .Children }}
        - {{ include "seldon.graph.node" . | indent 4 | trim }}
        {{- end }}
      {{- else }}
      children: []
      {{- end }}
      {{- end }}
      {{- define "seldon.container" }}
      - name: {{ .Name }}
        {{- if .Image }}
        image: {{ .Image }}
        {{- end }}
        {{- if .ImagePullPolicy }}
        imagePullPolicy: {{ .ImagePullPolicy }}
        {{- end }}
        {{- if .Args }}
        args:
          {{- range .Args }}
          - {{ . }}
          {{- end }}
        {{- end }}
        {{- if .Env }}
        env:
          {{- range .Env }}
          - name: {{ .Name }}
            {{- if .Value }}
            value: {{ .Value }}
            {{- else if .ValueFrom }}
            valueFrom:
              secretKeyRef:
                name: {{ .ValueFrom.SecretKeyRef.Name }}
                key: {{ .ValueFrom.SecretKeyRef.Key }}
            {{- end }}
          {{- end }}
        {{- end }}
        {{- if .EnvFrom }}
        envFrom:
          {{- range .EnvFrom }}
          {{- if .SecretRef }}
          - secretRef:
              name: {{ .SecretRef.Name }}
          {{- end }}
          {{- if .ConfigMapRef }}
          - configMapRef:
              name: {{ .ConfigMapRef.Name }}
          {{- end }}
          {{- end }}
        {{- end }}
        {{- if .VolumeMounts }}
        volumeMounts:
          {{- range .VolumeMounts }}
          - name: {{ .Name }}
            mountPath: {{ .MountPath }}
            {{- if .ReadOnly }}
            readOnly: {{ .ReadOnly }}
            {{- end }}
          {{- end }}
        {{- end }}
        {{- if .Resources }}
        resources:
          {{- if .Resources.Requests }}
          requests:
            {{- range $k, $v := .Resources.Requests }}
            {{ $k }}: {{ $v }}
            {{- end }}
          {{- end }}
          {{- if .Resources.Limits }}
          limits:
            {{- range $k, $v := .Resources.Limits }}
            {{ $k }}: {{ $v }}
            {{- end }}
          {{- end }}
        {{- end }}
        {{- if .Liveness }}
        livenessProbe:
          httpGet:
            path: {{ .Liveness.Path }}
            port: {{ .Liveness.Port }}
            {{- if .Liveness.Scheme }}
            scheme: {{ .Liveness.Scheme }}
            {{- end }}
          initialDelaySeconds: {{ .Liveness.InitialDelaySeconds }}
          periodSeconds: {{ .Liveness.PeriodSeconds }}
          failureThreshold: {{ .Liveness.FailureThreshold }}
          successThreshold: {{ .Liveness.SuccessThreshold }}
        {{- end }}
        {{- if .Readiness }}
        readinessProbe:
          httpGet:
            path: {{ .Readiness.Path }}
            port: {{ .Readiness.Port }}
            {{- if .Readiness.Scheme }}
            scheme: {{ .Readiness.Scheme }}
            {{- end }}
          initialDelaySeconds: {{ .Readiness.InitialDelaySeconds }}
          periodSeconds: {{ .Readiness.PeriodSeconds }}
          failureThreshold: {{ .Readiness.FailureThreshold }}
          successThreshold: {{ .Readiness.SuccessThreshold }}
        {{- end }}
        {{- if .Lifecycle }}
        lifecycle:
          {{- if .Lifecycle.PostStart }}
          postStart:
            {{- if .Lifecycle.PostStart.Exec }}
            exec:
              command:
                {{- range .Lifecycle.PostStart.Exec.Command }}
                - {{ . }}
                {{- end }}
            {{- end }}
            {{- if .Lifecycle.PostStart.HttpGet }}
            httpGet:
              path: {{ .Lifecycle.PostStart.HttpGet.Path }}
              port: {{ .Lifecycle.PostStart.HttpGet.Port }}
              {{- if .Lifecycle.PostStart.HttpGet.Scheme }}
              scheme: {{ .Lifecycle.PostStart.HttpGet.Scheme }}
              {{- end }}
              {{- if .Lifecycle.PostStart.HttpGet.Host }}
              host: {{ .Lifecycle.PostStart.HttpGet.Host }}
              {{- end }}
            {{- end }}
          {{- end }}
          {{- if .Lifecycle.PreStop }}
          preStop:
            {{- if .Lifecycle.PreStop.Exec }}
            exec:
              command:
                {{- range .Lifecycle.PreStop.Exec.Command }}
                - {{ . }}
                {{- end }}
            {{- end }}
            {{- if .Lifecycle.PreStop.HttpGet }}
            httpGet:
              path: {{ .Lifecycle.PreStop.HttpGet.Path }}
              port: {{ .Lifecycle.PreStop.HttpGet.Port }}
              {{- if .Lifecycle.PreStop.HttpGet.Scheme }}
              scheme: {{ .Lifecycle.PreStop.HttpGet.Scheme }}
              {{- end }}
              {{- if .Lifecycle.PreStop.HttpGet.Host }}
              host: {{.Lifecycle.PreStop.HttpGet.Host }}
              {{- end }}
            {{- end }}
          {{- end }}
        {{- end }}
      {{- end }}


  - path: templates/seldon-deployment.yaml
    template: false
    content: |
      apiVersion: {{ .Values.ApiVersion }}
      kind: SeldonDeployment
      metadata:
        name: {{ .Values.DeploymentName }}
        namespace: {{ .Values.Namespace }}
        labels:
        {{- range $k, $v := .Values.Metadata.Labels }}
          {{ $k }}: {{ $v }}
        {{- end }}
        {{- if .Values.Metadata.Annotations }}
        annotations:
        {{- range $k, $v := .Values.Metadata.Annotations }}
          {{ $k }}: {{ $v }}
        {{- end }}
        {{- end }}
      spec:
        name: {{ .Values.DeploymentName }}
        {{- if .Values.Protocol }}
        protocol: {{ .Values.Protocol }}
        {{- end }}
        {{- if .Values.Transport }}
        transport: {{ .Values.Transport }}
        {{- end }}
        {{- if .Values.SpecAnnotations }}
        annotations:
          {{- range $k, $v := .Values.SpecAnnotations }}
          {{ $k }}: {{ $v }}
          {{- end }}
        {{- end }}
        predictors:
        {{- range .Values.Predictors }}
          - name: {{ .Name }}
            {{- if .Replicas }}
            replicas: {{ .Replicas }}
            {{- end }}
            {{- if .Traffic }}
            traffic: {{ .Traffic }}
            {{- end }}
            {{- if .Annotations }}
            annotations:
            {{- range $k, $v := .Annotations }}
              {{ $k }}: {{ $v }}
            {{- end }}
            {{- end }}
            {{- if .EngineResources }}
            engineResources:
              {{- if .EngineResources.Requests }}
              requests:
                {{- range $k, $v := .EngineResources.Requests }}
                {{ $k }}: {{ $v }}
                {{- end }}
              {{- end }}
              {{- if .EngineResources.Limits }}
              limits:
                {{- range $k, $v := .EngineResources.Limits }}
                {{ $k }}: {{ $v }}
                {{- end }}
              {{- end }}
            {{- end }}
            {{- if .Labels }}
            labels:
              {{- range $k, $v := .Labels }}
              {{ $k }}: {{ $v }}
              {{- end }}
            {{- end }}
            {{- if .Shadow }}
            shadow: {{ .Shadow }}
            {{- end }}
            {{- if .SSL }}
            ssl:
              certSecretName: {{ .SSL.CertSecretName }}
            {{- end }}
            {{- if .ProgressDeadlineSeconds }}
            progressDeadlineSeconds: {{ .ProgressDeadlineSeconds }}
            {{- end }}
            {{- if .Explainer }}
            explainer:
              {{- if .Explainer.Type }}
              type: {{ .Explainer.Type }}
              {{- end }}
              {{- if .Explainer.ModelUri }}
              modelUri: {{ .Explainer.ModelUri }}
              {{- end }}
              {{- if .Explainer.ServiceAccountName }}
              serviceAccountName: {{ .Explainer.ServiceAccountName }}
              {{- end }}
              {{- if .Explainer.StorageInitializerImage }}
              storageInitializerImage: {{ .Explainer.StorageInitializerImage }}
              {{- end }}
              {{- if .Explainer.EnvSecretRefName }}
              envSecretRefName: {{ .Explainer.EnvSecretRefName }}
              {{- end }}
              {{- if .Explainer.InitParameters }}
              initParameters: {{ .Explainer.InitParameters | quote }}
              {{- end }}
              {{- if .Explainer.Replicas }}
              replicas: {{ .Explainer.Replicas }}
              {{- end }}
              {{- if .Explainer.Endpoint }}
              endpoint:
                type: {{ .Explainer.Endpoint.Type }}
              {{- end }}
              {{- if .Explainer.Config }}
              config:
                {{- range $k, $v := .Explainer.Config }}
                {{ $k }}: {{ $v }}
                {{- end }}
              {{- end }}
              {{- if .Explainer.ContainerSpec }}
              containerSpec:
              {{- include "seldon.container" .Explainer.ContainerSpec | indent 10 }}
              {{- end }}
            {{- end }}
            {{- if .SvcOrchSpec }}
            svcOrchSpec:
              {{- if .SvcOrchSpec.Resources }}
              resources:
                {{- if .SvcOrchSpec.Resources.Requests }}
                requests:
                  {{- range $k, $v := .SvcOrchSpec.Resources.Requests }}
                  {{ $k }}: {{ $v }}
                  {{- end }}
                {{- end }}
                {{- if .SvcOrchSpec.Resources.Limits }}
                limits:
                  {{- range $k, $v := .SvcOrchSpec.Resources.Limits }}
                  {{ $k }}: {{ $v }}
                  {{- end }}
                {{- end }}
              {{- end }}
              {{- if .SvcOrchSpec.Env }}
              env:
                {{- range .SvcOrchSpec.Env }}
                - name: {{ .Name }}
                  {{- if .Value }}
                  value: {{ .Value }}
                  {{- else if .ValueFrom }}
                  valueFrom:
                    secretKeyRef:
                      name: {{ .ValueFrom.SecretKeyRef.Name }}
                      key: {{ .ValueFrom.SecretKeyRef.Key }}
                  {{- end }}
                {{- end }}
              {{- end }}
            {{- end }}
            graph:
              {{- include "seldon.graph.node" .Graph | indent 8 }}
            componentSpecs:
              {{- if .HPASpec }}
              hpaSpec:
                minReplicas: {{ .HPASpec.MinReplicas }}
                maxReplicas: {{ .HPASpec.MaxReplicas }}
                metricsv2:
                  {{- range .HPASpec.MetricsV2 }}
                  - type: {{ .Type }}
                    resource:
                      name: {{ .Resource.Name }}
                      target:
                        type: {{ .Resource.Target.Type }}
                        averageUtilization: {{ .Resource.Target.AverageUtilization }}
                  {{- end }}
              {{- end }}
              - spec:
                  {{- if .ComponentSpec.ServiceAccountName }}
                  serviceAccountName: {{ .ComponentSpec.ServiceAccountName }}
                  {{- end }}
                  {{- if .ComponentSpec.TerminationGracePeriodSeconds }}
                  terminationGracePeriodSeconds: {{ .ComponentSpec.TerminationGracePeriodSeconds }}
                  {{- end }}
                  {{- if .ComponentSpec.Containers }}      
                  containers:
                    {{- range .ComponentSpec.Containers }}
                    {{- include "seldon.container" . | indent 14 }}
                    {{- end }}
                  {{- end }}
                  {{- if .ComponentSpec.InitContainers }}
                  initContainers:
                    {{- range .ComponentSpec.InitContainers }}
                    {{- include "seldon.container" . | indent 14 }}
                    {{- end }}
                  {{- end }}
                  {{- if .ComponentSpec.Volumes }}
                  volumes:
                    {{- range .ComponentSpec.Volumes }}
                    - name: {{ .Name }}
                      {{- if .EmptyDir }}
                      emptyDir: {}
                      {{- else if .Secret }}
                      secret:
                        secretName: {{ .Secret.SecretName }}
                      {{- end }}
                    {{- end }}
                  {{- end }}  
        {{- end }}

  - path: .helmignore
    template: false
    content: |
      *.tgz
      .DS_Store
      .idea/
      *.swp
      __pycache__/
      .ipynb_checkpoints/

valuesSchema:
  Environment:
    type: string
    description: Target environment (e.g., TEST, STAGING, PROD)
    required: true
  ApiVersion:
    type: string
    description: Kubernetes API version for the SeldonDeployment resource (e.g., machinelearning.seldon.io/v1)
    required: true
  Chart.Name:
    type: string
    description: Name of the Helm chart
    required: true
  Chart.Version:
    type: string
    description: Version of the Helm chart
    required: true
  Chart.Description:
    type: string
    description: Short description of the chart's purpose
    required: true
  DeploymentName:
    type: string
    description: Name of the SeldonDeployment resource
    required: true
  Namespace:
    type: string
    description: Kubernetes namespace to deploy the resources in
    required: true
  Metadata.Labels:
    type: object
    description: Key-value pairs used to categorize and select Kubernetes objects
    required: false
  Metadata.Annotations:
    type: object
    description: Annotations applied to the SeldonDeployment additional metadata for tooling, policies, and configuration
    required: false
  Protocol:
    type: string
    description: Inference protocol to use (e.g., seldon, tensorflow, v2)
    required: false
  Transport:
    type: string
    description: Transport mechanism to use (e.g., rest, grpc)
    required: false
  Annotations:
    type: object
    description: Annotations added to the SeldonDeployment spec
    required: false
  SpecAnnotations:
    type: object
    description: Additional annotations applied under SeldonDeployment.spec
    required: false
  Predictors:
    type: array
    description: List of predictors defining traffic-split and graph configurations
    required: true
  Predictors[].Name:
    type: string
    description: Unique name of the predictor
    required: true
  Predictors[].Replicas:
    type: integer
    description: Number of model replicas to deploy
    required: false
  Predictors[].Traffic:
    type: integer
    description: Percentage of traffic assigned to this predictor
    required: false
  Predictors[].Annotations:
    type: object
    description: Annotations applied to this predictor instance
    required: false
  Predictors[].SvcOrchSpec.Resources:
    type: object
    description: Resource requests and limits for the service orchestrator (keys limits, requests)
    required: false
  Predictors[].SvcOrchSpec.Resources.requests:
    type: object
    description: Requested CPU and memory resources
    required: false
  Predictors[].SvcOrchSpec.Resources.limits:
    type: object
    description: Maximum allowed CPU and memory resources
    required: false
  Predictors[].SvcOrchSpec.Env:
    type: array
    description: Environment variables for the service orchestrator
    required: false
  Predictors[].SvcOrchSpec.Env[].Name:
    type: string
    description: Name of environment variable for orchestrator
    required: true
  Predictors[].SvcOrchSpec.Env[].Value:
    type: string
    description: Value of environment variable for orchestrator
    required: false
  Predictors[].SvcOrchSpec.Env[].ValueFrom.SecretKeyRef.Name:
    type: string
    description: Name of the Kubernetes secret to reference
    required: false
  Predictors[].SvcOrchSpec.Env[].ValueFrom.SecretKeyRef.Key:
    type: string
    description: Key inside the referenced secret
    required: false
  Predictors[].Graph.Name:
    type: string
    description: Name of the root node in the prediction graph
    required: true
  Predictors[].Graph.Type:
    type: string
    description: Type of the node (MODEL, ROUTER, TRANSFORMER, etc.)
    required: true
  Predictors[].Graph.Implementation:
    type: string
    description: Predefined implementation for the model server (e.g., SKLEARN_SERVER, MLFLOW)
    required: false
  Predictors[].Graph.ModelUri:
    type: string
    description: URI to the stored model (S3, GCS, local, etc.)
    required: false
  Predictors[].Graph.Endpoint.Type:
    type: string
    description: Type of endpoint exposed by the graph (REST or GRPC)
    required: false
  Predictors[].Graph.EnvSecretRefName:
    type: string
    description: Name of secret to pull environment credentials from
    required: false
  Predictors[].Graph.Logger.Mode:
    type: string
    description: Logging mode (all, request, response, none)
    required: false
  Predictors[].Graph.Logger.URL:
    type: string
    description: Optional URL to send logs to
    required: false
  Predictors[].Graph.Parameters:
    type: array
    description: List of parameters for this graph node
    required: false
  Predictors[].Graph.Parameters[].Name:
    type: string
    description: Name of the parameter
    required: true
  Predictors[].Graph.Parameters[].Type:
    type: string
    description: Data type of the parameter (STRING, INT, FLOAT)
    required: true
  Predictors[].Graph.Parameters[].Value:
    type: string
    description: Value of the parameter
    required: true
  Predictors[].Graph.Children:
    type: array
    description: Child nodes in the prediction graph
    required: false
  Predictors[].ComponentSpec.ServiceAccountName:
    type: string
    description: Kubernetes service account used by pods for access control
    required: false
  Predictors[].ComponentSpec.TerminationGracePeriodSeconds:
    type: integer
    description: Time (in seconds) for graceful shutdown
    required: false
  Predictors[].ComponentSpec.Containers:
    type: array
    description: Additional containers in the predictor pod
    required: false
  Predictors[].ComponentSpec.Containers[].Name:
    type: string
    description: Name of the container in the pod
    required: true
  Predictors[].ComponentSpec.Containers[].Image:
    type: string
    description: Docker image to use in the container
    required: true
  Predictors[].ComponentSpec.Containers[].ImagePullPolicy:
    type: string
    description: Kubernetes image pull policy (Always, IfNotPresent, Never)
    required: false
  Predictors[].ComponentSpec.Containers[].Args:
    type: array
    description: Command-line arguments passed to the container entrypoint
    required: false
  Predictors[].ComponentSpec.Containers[].Env:
    type: array
    description: Environment variables for the container
    required: false
  Predictors[].ComponentSpec.Containers[].Env[].Name:
    type: string
    description: Name of the environment variable
    required: true
  Predictors[].ComponentSpec.Containers[].Env[].Value:
    type: string
    description: Value of the environment variable
    required: false
  Predictors[].ComponentSpec.Containers[].Env[].ValueFrom.SecretKeyRef.Name:
    type: string
    description: Name of the Kubernetes secret to reference
    required: false
  Predictors[].ComponentSpec.Containers[].Env[].ValueFrom.SecretKeyRef.Key:
    type: string
    description: Key inside the referenced secret
    required: false
  Predictors[].ComponentSpec.Containers[].EnvFrom:
    type: array
    description: List of sources to populate environment variables from (ConfigMaps or Secrets)
    required: false
  Predictors[].ComponentSpec.Containers[].EnvFrom[].SecretRef.Name:
    type: string
    description: Name of the Secret for env import
    required: false
  Predictors[].ComponentSpec.Containers[].EnvFrom[].ConfigMapRef.Name:
    type: string
    description: Name of the ConfigMap for env import
    required: false
  Predictors[].ComponentSpec.Containers[].VolumeMounts:
    type: array
    description: Volume mounts for container
    required: false
  Predictors[].ComponentSpec.Containers[].VolumeMounts[].Name:
    type: string
    description: Name of the volume to mount
    required: true
  Predictors[].ComponentSpec.Containers[].VolumeMounts[].MountPath:
    type: string
    description: Path in container where volume will be mounted
    required: true
  Predictors[].ComponentSpec.Containers[].VolumeMounts[].ReadOnly:
    type: boolean
    description: Whether the volume mount should be read-only
    required: false
  Predictors[].ComponentSpec.Containers[].Resources.Requests:
    type: object
    description: Minimum amount of compute resources required
    required: false
  Predictors[].ComponentSpec.Containers[].Resources.Limits:
    type: object
    description: Maximum amount of compute resources allowed
    required: false
  Predictors[].ComponentSpec.Containers[].Liveness:
    type: object
    description: Liveness probe configuration for container
    required: false
  Predictors[].ComponentSpec.Containers[].Readiness:
    type: object
    description: Readiness probe configuration for container
    required: false
  Predictors[].ComponentSpec.Containers[].Lifecycle:
    type: object
    description: Lifecycle hooks for the container (preStop and postStart)
    required: false
  Predictors[].ComponentSpec.Containers[].Lifecycle.PreStop.Exec.Command:
    type: array
    description: Command to run in preStop lifecycle hook (exec)
    required: false
  Predictors[].ComponentSpec.Containers[].Lifecycle.PreStop.HttpGet.Path:
    type: string
    description: HTTP path to access on the server for preStop hook
    required: false
  Predictors[].ComponentSpec.Containers[].Lifecycle.PreStop.HttpGet.Port:
    type: string
    description: Port to access on the server for preStop hook
    required: false
  Predictors[].ComponentSpec.Containers[].Lifecycle.PostStart.Exec.Command:
    type: array
    description: Command to run in postStart lifecycle hook (exec)
    required: false
  Predictors[].ComponentSpec.Containers[].Lifecycle.PostStart.HttpGet.Path:
    type: string
    description: HTTP path to access on the server for postStart hook
    required: false
  Predictors[].ComponentSpec.Containers[].Lifecycle.PostStart.HttpGet.Port:
    type: string
    description: Port to access on the server for postStart hook
    required: false
  Predictors[].ComponentSpec.Volumes:
    type: array
    description: Volumes used by the predictor
    required: false
  Predictors[].ComponentSpec.Volumes[].Name:
    type: string
    description: Name of the volume
    required: true
  Predictors[].ComponentSpec.Volumes[].Secret.SecretName:
    type: string
    description: Kubernetes secret name to mount as volume
    required: false
  Predictors[].ComponentSpec.Volumes[].EmptyDir:
    type: object
    description: EmptyDir volume source for ephemeral storage
    required: false
  Predictors[].ComponentSpec.InitContainers:
    type: array
    description: Init containers to run before main containers
    required: false
  Predictors[].ComponentSpec.InitContainers[].Name:
    type: string
    description: Name of the init container
    required: true
  Predictors[].ComponentSpec.InitContainers[].Image:
    type: string
    description: Image of the init container
    required: true
  Predictors[].ComponentSpec.InitContainers[].ImagePullPolicy:
    type: string
    description: Policy for pulling init container image
    required: false
  Predictors[].ComponentSpec.InitContainers[].Args:
    type: array
    description: Arguments passed to init container on start
    required: false
  Predictors[].ComponentSpec.InitContainers[].Env:
    type: array
    description: Environment variables for the init container
    required: false
  Predictors[].ComponentSpec.InitContainers[].Env[].Name:
    type: string
    description: Name of the environment variable
    required: true
  Predictors[].ComponentSpec.InitContainers[].Env[].Value:
    type: string
    description: Value of the environment variable
    required: false
  Predictors[].ComponentSpec.InitContainers[].Env[].ValueFrom.SecretKeyRef.Name:
    type: string
    description: Name of the Kubernetes secret for env valueFrom
    required: false
  Predictors[].ComponentSpec.InitContainers[].Env[].ValueFrom.SecretKeyRef.Key:
    type: string
    description: Key within the Kubernetes secret for env valueFrom
    required: false
  Predictors[].ComponentSpec.InitContainers[].EnvFrom:
    type: array
    description: List of sources to populate environment variables from (ConfigMaps or Secrets)
    required: false
  Predictors[].ComponentSpec.InitContainers[].EnvFrom[].SecretRef.Name:
    type: string
    description: Name of the Secret for env import
    required: false
  Predictors[].ComponentSpec.InitContainers[].EnvFrom[].ConfigMapRef.Name:
    type: string
    description: Name of the ConfigMap for env import
    required: false
  Predictors[].ComponentSpec.InitContainers[].VolumeMounts:
    type: array
    description: Volume mounts for the init container
    required: false
  Predictors[].ComponentSpec.InitContainers[].VolumeMounts[].Name:
    type: string
    description: Volume name to mount into init container
    required: true
  Predictors[].ComponentSpec.InitContainers[].VolumeMounts[].MountPath:
    type: string
    description: Path inside init container to mount the volume
    required: true
  Predictors[].ComponentSpec.InitContainers[].VolumeMounts[].ReadOnly:
    type: boolean
    description: Whether the mount is read-only
    required: false
  Predictors[].ComponentSpec.InitContainers[].Resources.Requests:
    type: object
    description: Minimum resources required by init container
    required: false
  Predictors[].ComponentSpec.InitContainers[].Resources.Limits:
    type: object
    description: Maximum resources allowed for init container
    required: false
  Predictors[].ComponentSpec.InitContainers[].Liveness:
    type: object
    description: Liveness probe for the init container
    required: false
  Predictors[].ComponentSpec.InitContainers[].Readiness:
    type: object
    description: Readiness probe for the init container
    required: false
  Predictors[].ComponentSpec.InitContainers[].Lifecycle:
    type: object
    description: Lifecycle hooks for the init container
    required: false
  Predictors[].ComponentSpec.InitContainers[].Lifecycle.PreStop.Exec.Command:
    type: array
    description: Command to run in preStop lifecycle hook (exec)
    required: false
  Predictors[].ComponentSpec.InitContainers[].Lifecycle.PostStart.Exec.Command:
    type: array
    description: Command to run in postStart lifecycle hook (exec)
    required: false
  Predictors[].ComponentSpec.InitContainers[].Lifecycle.PreStop.HttpGet.Path:
    type: string
    description: HTTP path to access on the server for preStop hook
    required: false
  Predictors[].ComponentSpec.InitContainers[].Lifecycle.PreStop.HttpGet.Port:
    type: string
    description: Port to access on the server for preStop hook
    required: false
  Predictors[].ComponentSpec.InitContainers[].Lifecycle.PostStart.HttpGet.Path:
    type: string
    description: HTTP path to access on the server for postStart hook
    required: false
  Predictors[].ComponentSpec.InitContainers[].Lifecycle.PostStart.HttpGet.Port:
    type: string
    description: Port to access on the server for postStart hook
    required: false
  Predictors[].ComponentSpec.HPASpec:
    type: object
    description: Horizontal Pod Autoscaler configuration for the predictor
    required: false
  Predictors[].ComponentSpec.HPASpec.MinReplicas:
    type: integer
    description: Minimum number of replicas allowed
    required: true
  Predictors[].ComponentSpec.HPASpec.MaxReplicas:
    type: integer
    description: Maximum number of replicas allowed
    required: true
  Predictors[].ComponentSpec.HPASpec.MetricsV2:
    type: array
    description: List of custom metrics for autoscaling
    required: false
  Predictors[].ComponentSpec.HPASpec.MetricsV2[].Type:
    type: string
    description: Type of metric (e.g., Resource)
    required: true
  Predictors[].ComponentSpec.HPASpec.MetricsV2[].Resource.Name:
    type: string
    description: Resource name for autoscaling (e.g., cpu)
    required: true
  Predictors[].ComponentSpec.HPASpec.MetricsV2[].Resource.Target.Type:
    type: string
    description: Type of target (e.g., Utilization)
    required: true
  Predictors[].ComponentSpec.HPASpec.MetricsV2[].Resource.Target.AverageUtilization:
    type: integer
    description: Target average utilization percentage
    required: false
  Predictors[].EngineResources.Requests:
    type: object
    description: Resource requests (e.g., cpu and memory) for the Seldon engine sidecar container
    required: false
  Predictors[].EngineResources.Limits:
    type: object
    description: Resource limits (e.g., cpu and memory) for the Seldon engine sidecar container
    required: false
  Predictors[].Labels:
    type: object
    description: Custom labels applied to the predictor deployment
    required: false
  Predictors[].Shadow:
    type: boolean
    description: If true, all traffic is shadowed to this predictor without impacting the response
    required: false
  Predictors[].SSL.CertSecretName:
    type: string
    description: SSL sertificate secrete name for this predictor
    required: false
  Predictors[].ProgressDeadlineSeconds:
    type: integer
    description: Time in seconds the deployment controller should wait before marking the predictor as failed
    required: false
  Predictors[].Explainer.Type:
    type: string
    description: The type of explainer (e.g., "anchor_tabular", "alibi") used to interpret model predictions
    required: false
  Predictors[].Explainer.ModelUri:
    type: string
    description: URI pointing to the explainer model location
    required: false
  Predictors[].Explainer.Config:
    type: object
    description: Key-value configuration settings passed to the explainer
    required: false
  Predictors[].Explainer.Endpoint.Type:
    type: string
    description: Type of the endpoint protocol (e.g., REST or GRPC)
    required: false
  Predictors[].Explainer.EnvSecretRefName:
    type: string
    description: Name of the secret containing environment variables for the explainer
    required: false
  Predictors[].Explainer.StorageInitializerImage:
    type: string
    description: Custom image to use for the explainer's storage initializer
    required: false
  Predictors[].Explainer.Replicas:
    type: integer
    description: Number of replicas to run for the explainer deployment
    required: false
  Predictors[].Explainer.InitParameters:
    type: string
    description: JSON-formatted string with initialization parameters for the explainer
    required: false
  Predictors[].Explainer.ContainerSpec.Name:
    type: string
    description: Name of the explainer container
    required: false
  Predictors[].Explainer.ContainerSpec.Image:
    type: string
    description: Container image for the explainer
    required: false
  Predictors[].Explainer.ContainerSpec.Args:
    type: array
    description: Command-line arguments passed to the explainer container
    required: false
  Predictors[].Explainer.ContainerSpec.ImagePullPolicy:
    type: string
    description: Policy for pulling init container image
    required: false  