{
  "Environment": "TEST",
  "ApiVersion": "machinelearning.seldon.io/v1",
  "Chart": {
    "Name": "test-model",
    "Version": "0.1.0",
    "Description": "Test Seldon deployment chart"
  },
  "DeploymentName": "test-explainer-model",
  "Namespace": "default",
  "Predictors": [
    {
      "Name": "default",
      "Replicas": 2,
      "Traffic": 100,
      "Shadow": true,
      "Labels": {
        "team": "ml",
        "env": "test"
      },
      "SSL": {
        "CertSecretName": "tls-cert-secret"
      },
      "ProgressDeadlineSeconds": 600,
      "EngineResources": {
        "Requests": {
          "cpu": "200m",
          "memory": "256Mi"
        },
        "Limits": {
          "cpu": "500m",
          "memory": "512Mi"
        }
      },
      "ComponentSpec": {
        "ServiceAccountName": "explainer-sa",
        "TerminationGracePeriodSeconds": 20,
        "Containers": [
          {
            "Name": "classifier",
            "Image": "seldonio/sklearn-iris:0.1",
            "ImagePullPolicy": "IfNotPresent",
            "Args": [
              "--model",
              "serve"
            ],
            "Env": [
              {
                "Name": "MODEL_ENV",
                "Value": "prod"
              }
            ],
            "Resources": {
              "Requests": {
                "cpu": "100m",
                "memory": "128Mi"
              },
              "Limits": {
                "cpu": "200m",
                "memory": "256Mi"
              }
            },
            "Liveness": {
              "Path": "/health",
              "Port": "8080",
              "InitialDelaySeconds": 5,
              "PeriodSeconds": 10,
              "FailureThreshold": 3,
              "SuccessThreshold": 1,
              "Scheme": "HTTP"
            },
            "Readiness": {
              "Path": "/ready",
              "Port": "8080",
              "InitialDelaySeconds": 5,
              "PeriodSeconds": 10,
              "FailureThreshold": 3,
              "SuccessThreshold": 1,
              "Scheme": "HTTP"
            }
          }
        ]
      },
      "Explainer": {
        "Type": "anchor_tabular",
        "ModelUri": "gs://seldon-models/explainer",
        "ServiceAccountName": "explainer-sa",
        "StorageInitializerImage": "seldonio/storage-init:1.18.0-dev",
        "EnvSecretRefName": "explainer-secret",
        "Replicas": 1,
        "InitParameters": "{ \"threshold\": 0.95, \"top_n\": 3 }",
        "Endpoint": {
          "Type": "REST"
        },
        "Config": {
          "explainer_runtime": "python",
          "logging": "debug"
        },
        "ContainerSpec": {
          "Name": "custom-explainer",
          "Image": "seldonio/explainer-anchor:0.1",
          "Args": [
            "--explain"
          ]
        }
      },
      "Graph": {
        "Name": "classifier",
        "Type": "MODEL",
        "Implementation": "SKLEARN_SERVER",
        "ModelUri": "gs://seldon-models/sklearn/iris",
        "Children": []
      }
    }
  ]
}
