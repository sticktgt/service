{
  "Environment": "TEST",
  "ApiVersion": "machinelearning.seldon.io/v1",
  "Chart": {
    "Name": "router-graph",
    "Version": "0.1.0",
    "Description": "A router with multiple child models"
  },
  "DeploymentName": "graph-metadata-router",
  "Namespace": "default",
  "Metadata": {
    "Labels": {
      "team": "ml"
    },
    "Annotations": {
      "note": "test router graph"
    }
  },
  "Predictors": [
    {
      "Name": "example",
      "Replicas": 1,
      "Traffic": 100,
      "SvcOrchEnv": [],
      "Graph": {
        "Name": "node-router",
        "Type": "ROUTER",
        "Children": [
          {
            "Name": "node-one",
            "Type": "MODEL",
            "Implementation": "SKLEARN_SERVER",
            "ModelUri": "gs://seldon-models/sklearn/iris-one",
            "Children": []
          },
          {
            "Name": "node-two",
            "Type": "MODEL",
            "Implementation": "SKLEARN_SERVER",
            "ModelUri": "gs://seldon-models/sklearn/iris-two",
            "Children": []
          }
        ]
      },
      "ComponentSpec": {
        "ServiceAccountName": "default",
        "TerminationGracePeriodSeconds": 20,
        "Containers": [
          {
            "Name": "router",
            "Image": "myregistry/router:latest",
            "ImagePullPolicy": "IfNotPresent",
            "Env": [
              {
                "Name": "MODEL_ENV",
                "Value": "router"
              }
            ],
            "VolumeMounts": [
              {
                "Name": "config-vol",
                "MountPath": "/etc/config",
                "ReadOnly": true
              }
            ],
            "Resources": {
              "Requests": {
                "cpu": "100m",
                "memory": "256Mi"
              },
              "Limits": {
                "cpu": "500m",
                "memory": "512Mi"
              }
            }
          }
        ],
        "Volumes": [
          {
            "Name": "config-vol",
            "Secret": {
              "SecretName": "router-config-secret"
            }
          }
        ]
      }
    }
  ]
}
